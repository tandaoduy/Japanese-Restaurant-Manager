@model Project_65133141.Models.TinTuc
@{
    ViewBag.Title = Model.TieuDe + " | SAKURA KAZOKU";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var relatedNews = ViewBag.RelatedNews as List<Project_65133141.Models.TinTuc>;
}

<!-- Hero Section -->
<section class="hero-section relative overflow-hidden -mt-36" style="height: 50vh; min-height: 400px;">
    <style>
        .hero-section img.hero-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            animation: fadeScaleIn 1.5s ease-out;
        }
        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.4);
        }
        .hero-content-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            padding-top: 100px;
        }
        .hero-text {
            color: white;
            max-width: 900px;
            animation: fadeInUp 1s ease-out 0.3s both;
            text-align: left;
        }
        .hero-title {
            font-size: 3rem;
            font-weight: 400; /* Lighter weight for elegance */
            font-family: 'Playfair Display', serif; /* Serif font as requested */
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
            text-shadow: 2px 4px 8px rgba(0,0,0,0.6);
        }
        .hero-underline {
            width: 60px;
            height: 3px;
            background-color: #ec4899; /* Pink/Red accent */
            margin-top: 1rem;
        }
        @@keyframes fadeScaleIn {
            from { opacity: 0; transform: scale(1.1); }
            to { opacity: 1; transform: scale(1); }
        }
        @@keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    
    <img src="@Url.Content("~/Images/slidetintuc.jpg")" alt="Tin Tức Background" class="hero-image">
    <div class="hero-overlay"></div>
    <div class="hero-content-wrapper">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="hero-text">
                <h1 class="hero-title">TIN TỨC & KHUYẾN MÃI</h1>
                <div class="hero-underline"></div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content Section -->
<div class="container mx-auto px-4 py-16">
    <div class="max-w-4xl mx-auto">
        <!-- Background Decoration (Watermark) -->
        <div class="relative">
            <div class="absolute -top-10 -left-10 opacity-5 pointer-events-none">
                    <svg width="300" height="150" viewBox="0 0 300 150" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 50 C 50 0, 100 0, 150 50 S 250 100, 300 50" stroke="#000" stroke-width="2" />
                    <path d="M0 70 C 50 20, 100 20, 150 70 S 250 120, 300 70" stroke="#000" stroke-width="2" />
                </svg>
            </div>

            <!-- Date -->
            <div class="text-gray-500 text-sm font-medium tracking-wider mb-3 text-center">
                @(Model.NgayDang?.ToString("yyyy.MM.dd") ?? DateTime.Now.ToString("yyyy.MM.dd"))
            </div>

            <!-- Article Title -->
            <h1 class="text-3xl lg:text-5xl text-gray-800 font-serif leading-tight mb-8 text-center">
                @Model.TieuDe
            </h1>

            <!-- Featured Image -->
                @{
                var featuredImagePath = !string.IsNullOrWhiteSpace(Model.HinhAnh)
                    ? Url.Content("~/Images/TinTuc/" + Model.HinhAnh)
                    : Url.Content("~/Images/slide09.jpg");
            }
            <div class="mb-12 rounded-xl overflow-hidden shadow-lg">
                <img src="@featuredImagePath" alt="@Model.TieuDe" class="w-full h-auto object-cover"
                        onerror="this.src='@Url.Content("~/Images/slide09.jpg")'" />
            </div>

            <!-- Short Description -->
            @if (!string.IsNullOrWhiteSpace(Model.MoTaNgan))
            {
                <div class="text-xl text-gray-600 italic border-l-4 border-red-500 pl-6 py-4 mb-12 bg-gray-50 rounded-r-lg shadow-sm">
                    @Model.MoTaNgan
                </div>
            }

            <!-- Full Content -->
            <div class="article-body text-gray-700 leading-loose text-lg font-light text-justify">
                @if (!string.IsNullOrWhiteSpace(Model.NoiDung))
                {
                    @Html.Raw(Model.NoiDung)
                }
                else
                {
                    <p class="text-gray-500 italic text-center">Nội dung đang được cập nhật...</p>
                }
            </div>

                <!-- Author / Share -->
            <div class="mt-16 pt-8 border-t border-gray-100 flex items-center justify-between">
                <div class="text-base text-gray-500">
                    Viết bởi: <span class="font-semibold text-gray-800">@(Model.NhanVien != null ? Model.NhanVien.HoTen : "Admin")</span>
                </div>
                <!-- Simple Share Icons -->
                <div class="flex gap-4">
                    <button class="text-gray-400 hover:text-blue-600 transition p-2"><i class="fab fa-facebook-f text-lg"></i></button>
                    <button class="text-gray-400 hover:text-sky-500 transition p-2"><i class="fab fa-twitter text-lg"></i></button>
                </div>
            </div>

            <!-- Related News (Below Content) -->
            @if (relatedNews != null && relatedNews.Any())
            {
                <div class="mt-20">
                    <h3 class="text-3xl font-serif text-gray-800 mb-10 text-center relative inline-block w-full">
                        <span class="relative z-10 bg-white px-6">Bài viết liên quan</span>
                        <div class="absolute top-1/2 left-0 w-full h-px bg-gray-200 -z-0"></div>
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        @foreach (var news in relatedNews)
                        {
                            var relatedImg = !string.IsNullOrWhiteSpace(news.HinhAnh) ? Url.Content("~/Images/TinTuc/" + news.HinhAnh) : Url.Content("~/Images/slide09.jpg");
                            <a href="@Url.Action("Details", "TinTuc", new { area = "", slug = news.Slug })" class="group block">
                                <div class="overflow-hidden rounded-lg mb-4 h-56 shadow-md">
                                    <img src="@relatedImg" class="w-full h-full object-cover transform group-hover:scale-105 transition duration-500" alt="@news.TieuDe">
                                </div>
                                <h4 class="text-lg font-serif font-medium text-gray-800 group-hover:text-red-600 transition line-clamp-2">@news.TieuDe</h4>
                                <div class="text-sm text-gray-400 mt-2">@news.NgayDang.Value.ToString("yyyy.MM.dd")</div>
                            </a>
                        }
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<style>
    /* Content Typography Overrides */
    .article-body h2 {
        font-family: 'Playfair Display', serif;
        font-size: 1.75rem;
        margin-top: 2.5rem;
        margin-bottom: 1.5rem;
        color: #1f2937;
    }
    .article-body h3 {
        font-family: 'Playfair Display', serif;
        font-size: 1.5rem;
        margin-top: 2rem;
        margin-bottom: 1rem;
        color: #374151;
    }
    .article-body img {
        border-radius: 8px;
        margin: 2rem 0;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    .article-body ul {
        list-style-type: disc;
        padding-left: 1.5rem;
        margin-bottom: 1.5rem;
    }
    .article-body blockquote {
        border-left: 4px solid #ef4444;
        padding-left: 1.5rem;
        font-style: italic;
        color: #4b5563;
        margin: 2rem 0;
    }
</style>

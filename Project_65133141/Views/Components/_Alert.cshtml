@* Component: Alert - Hiển thị thông báo *@
@model string

@{
    var alertType = ViewBag.AlertType as string ?? "info"; // success, error, warning, info
    var alertTitle = ViewBag.AlertTitle as string ?? "";
    var isDismissible = ViewBag.IsDismissible as bool? ?? true;
    var autoHide = ViewBag.AutoHide as bool? ?? false;
    var hideDelay = ViewBag.HideDelay as int? ?? 5000;
}

@if (!string.IsNullOrEmpty(Model))
{
    var alertId = "alert-" + Guid.NewGuid().ToString("N");
    <div id="@alertId" 
         class="alert alert-@alertType rounded-lg p-4 mb-4 border-l-4 
                @(alertType == "success" ? "bg-green-50 border-green-500 text-green-800" : "") 
                @(alertType == "error" ? "bg-red-50 border-red-500 text-red-800" : "") 
                @(alertType == "warning" ? "bg-yellow-50 border-yellow-500 text-yellow-800" : "") 
                @(alertType == "info" ? "bg-blue-50 border-blue-500 text-blue-800" : "")"
         role="alert">
        <div class="flex items-start">
            <div class="flex-shrink-0">
                @if (alertType == "success")
                {
                    <div class="w-7 h-7 rounded-full bg-green-100 flex items-center justify-center">
                        <svg class="h-4 w-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                }
                else if (alertType == "error")
                {
                    <div class="w-7 h-7 rounded-full bg-red-100 flex items-center justify-center">
                        <svg class="h-4 w-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01M4.93 4.93l14.14 14.14" />
                            <circle cx="12" cy="12" r="9" stroke-width="2" fill="none"></circle>
                        </svg>
                    </div>
                }
                else if (alertType == "warning")
                {
                    <div class="w-7 h-7 rounded-full bg-amber-100 flex items-center justify-center">
                        <svg class="h-4 w-4 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 3h.01M10.29 4.21l-6.6 11.45A1 1 0 004.53 18h14.94a1 1 0 00.86-1.5l-6.6-11.45a1 1 0 00-1.74 0z" />
                        </svg>
                    </div>
                }
                else
                {
                    <div class="w-7 h-7 rounded-full bg-sky-100 flex items-center justify-center">
                        <svg class="h-4 w-4 text-sky-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01" />
                            <circle cx="12" cy="12" r="9" stroke-width="2" fill="none"></circle>
                        </svg>
                    </div>
                }
            </div>
            <div class="ml-3 flex-1">
                @if (!string.IsNullOrEmpty(alertTitle))
                {
                    <h3 class="text-sm font-semibold mb-1">@alertTitle</h3>
                }
                <p class="text-sm">@Model</p>
            </div>
            @if (isDismissible)
            {
                <div class="ml-auto pl-3">
                    <button type="button" 
                            onclick="this.closest('.alert').style.display='none'" 
                            class="inline-flex rounded-md p-1.5 hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-offset-2 transition">
                        <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
            }
        </div>
    </div>


    if (autoHide)
    {
        <script>
            setTimeout(function() {
                var alert = document.getElementById('@alertId');
                if (alert) {
                    alert.style.transition = 'opacity 0.5s';
                    alert.style.opacity = '0';
                    setTimeout(function() {
                        if (alert) alert.style.display = 'none';
                    }, 500);
                }
            }, @hideDelay);
        </script>
    }
}









